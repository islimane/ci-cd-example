<!--
  @description       : 
  @author            : ChangeMeIn@UserSettingsUnder.SFDoc
  @group             : 
  @last modified on  : 10-06-2022
  @last modified by  : ChangeMeIn@UserSettingsUnder.SFDoc
-->
<template>
    <!--INICIO-PRODUCT-LIST-PAGE-->
    <lightning-spinner if:false={isLoaded} class="slds-is-relative slds-align_absolute-center slds-m-around_large"
        alternative-text={labels.loadingMenu} size="medium" variant="brand">
    </lightning-spinner>

    <template if:true={isLoaded}>
        <template if:false={callchild}>
            <section class="plp">
                    <template if:true={ischaves}>
                        <p class="num-items-chaves">{totalItemsTitle}</p>
                    </template>
                    <template if:false={ischaves}>
                        <p class="num-items">{totalItemsTitle}</p>
                    </template>
                <div class="plp-wrapper">
                <template if:false={noProducts}>
                    <div class="plp-filters">
                        <template if:true={isMobile}>
                            <div class="sort-btn-mobile">
								<lightning-button-icon icon-name="action:filter" label={labels.filtersLabel} size="large" variant="brand" alternative-text={labels.filtersLabel} onclick={handleFilter} class="my-round-button">
                                </lightning-button-icon>
								<span>Filter</span>
							</div>
                        </template>
                        <template if:true={isDesktop}>
                            <div class="slds-m-top_xx-small plp-filters-header">
                                <p class="plp-filter-title">{labels.filtersLabel}</p>
                                <lightning-button class="clear-all-button" variant="base" label={labels.clearAllLabel}
                                    onclick={handleClearAll}>
                                </lightning-button>
                            </div>

                            <lightning-accordion allow-multiple-sections-open class="slds-border_top"
                                active-section-name={activeSectionsList}>
                                <lightning-accordion-section if:true={showUseMaterialFilter} name="use_material"
                                    label={labels.useLabel}>
                                    <template for:each={useMaterialFilterSet} for:item="filter">
                                        <lightning-input class="slds-p-left_medium slds-p-bottom_small" key={filter}
                                            label={filter} data-target-id={filter} type="checkbox"
                                            onchange={handleUseMaterialCheckboxChange}>
                                        </lightning-input>
                                    </template>
                                </lightning-accordion-section>
                                <lightning-accordion-section if:true={showCoveringFilter} name="covering"
                                    label={labels.finishLabel}>
                                    <template for:each={coveringFilterSet} for:item="filter">
                                        <lightning-input class="slds-p-left_medium slds-p-bottom_small" key={filter}
                                            label={filter} data-target-id={filter} type="checkbox"
                                            onchange={handleCoveringCheckboxChange}>
                                        </lightning-input>
                                    </template>
                                </lightning-accordion-section>
                                <lightning-accordion-section if:true={showHomologatedFilter} name="homologated"
                                    label={labels.homologatedLabel}>
                                    <template for:each={homologatedFilterSet} for:item="filter">
                                        <lightning-input class="slds-p-left_medium slds-p-bottom_small" key={filter}
                                            label={filter} data-target-id={filter} type="checkbox"
                                            onchange={handleHomologatedCheckboxChange}>
                                        </lightning-input>
                                    </template>
                                </lightning-accordion-section>
                                <lightning-accordion-section if:true={showImprintFilter} name="imprint"
                                    label={labels.imprintLabel}>
                                    <template for:each={imprintFilterSet} for:item="filter">
                                        <lightning-input class="slds-p-left_medium slds-p-bottom_small" key={filter}
                                            label={filter} data-target-id={filter} type="checkbox"
                                            onchange={handleImprintCheckboxChange}>
                                        </lightning-input>
                                    </template>
                                </lightning-accordion-section>
                            </lightning-accordion>
                        </template>
                    </div>
                </template>

                    <div class="plp-items">
                        <template if:false={noProducts}>
                            <p class="btn-compare">
                                <lightning-button label={compareButtonLabel} variant='brand' disabled=true onclick={compareMaterials} data-id="comparisonButton">
                                </lightning-button>
                            </p>
                        </template>
                        <template if:true={noProducts}>
                            <template if:true={isMobile}>
                                <div class="plp-filters">
                                    <div class="sort-btn-mobile">
                                        <lightning-button-icon icon-name="action:filter" label={labels.filtersLabel} size="large" variant="brand" alternative-text={labels.filtersLabel} onclick={handleFilter} class="my-round-button"></lightning-button-icon>
                                        <span>Filter</span>
                                    </div>
                                </div>
                            </template>	
                            <div class="slds-text-align_center slds-text-color_weak slds-var-m-vertical_xx-large">
                                <h3 class="slds-text-heading_medium">{labels.noMaterials1}</h3>
                                <p class="slds-text-body_regular">{labels.noMaterials2}</p>
                            </div>
                        </template>
                        <template if:true={ischaves}>
                            <ul class="plp-items-list-chaves">
                                <template if:false={showFilteredList} for:each={materialsList} for:item="material">
                                    <li key={material.ProductId}>
                                        <div data-target-id={material.ProductId} onclick={handleMaterialSelection}>
                                            <figure>
                                                <img src={material.Product.Product_Image__c}>
                                            </figure>
                                            <p class="title">{material.Product.Name}</p>
                                            <p if:true={material.Product.Family_Description__c} class="description slds-p-bottom_small">{material.Product.Family_Description__c}</p>
                                            <p class="description">{material.Product.Description}</p>
                                        </div>
                                        <div class={checkboxClass}>
                                            <lightning-input data-target-id={material.ProductId} type="checkbox"
                                                label={labels.compareLabel} name="compareInput" onchange={inputChange}
                                                checked={material.checked} data-name={material.ProductId} data-element="compareInput">
                                            </lightning-input>
                                        </div>
                                    </li>
                                </template>
                                <template if:true={showFilteredList} for:each={filteredMaterialList} for:item="material">
                                    <li key={material.ProductId}>
                                        <div data-target-id={material.ProductId} onclick={handleMaterialSelection}>
                                            <figure>
                                                <img src={material.Product.Product_Image__c}>
                                            </figure>
                                            <p class="title">{material.Product.Name}</p>
                                            <p if:true={material.Product.Family_Description__c} class="description slds-p-bottom_small">{material.Product.Family_Description__c}</p>
                                            <p class="description">{material.Product.Description}</p>
                                        </div>
                                        <div class={checkboxClass}>
                                            <lightning-input data-target-id={material.ProductId} type="checkbox"
                                                label={labels.compareLabel} name="compareInput" onchange={inputChange}
                                                checked={material.checked} data-element="compareInput">
                                            </lightning-input>
                                        </div>
                                    </li>
                                </template>
                            </ul>
                        </template>
                        <template if:false={ischaves}>
                            <ul class="plp-items-list">
                                <template if:false={showFilteredList} for:each={materialsList} for:item="material">
                                    <li key={material.ProductId}>
                                        <div data-target-id={material.ProductId} onclick={handleMaterialSelection}>
                                            <figure>
                                                <img src={material.Product.Product_Image__c}>
                                            </figure>
                                            <p class="title">{material.Product.Name}</p>
                                            <p if:true={material.Product.Family_Description__c} class="description slds-p-bottom_small">{material.Product.Family_Description__c}</p>
                                            <p class="description">{material.Product.Description}</p>
                                        </div>
                                        <div class={checkboxClass}>
                                            <lightning-input data-target-id={material.ProductId} type="checkbox"
                                                label={labels.compareLabel} name="compareInput" onchange={inputChange}
                                                checked={material.checked} data-name={material.ProductId} data-element="compareInput">
                                            </lightning-input>
                                        </div>
                                    </li>
                                </template>
                                <template if:true={showFilteredList} for:each={filteredMaterialList} for:item="material">
                                    <li key={material.ProductId}>
                                        <div data-target-id={material.ProductId} onclick={handleMaterialSelection}>
                                            <figure>
                                                <img src={material.Product.Product_Image__c}>
                                            </figure>
                                            <p class="title">{material.Product.Name}</p>
                                            <p if:true={material.Product.Family_Description__c} class="description slds-p-bottom_small">{material.Product.Family_Description__c}</p>
                                            <p class="description">{material.Product.Description}</p>
                                        </div>
                                        <div class={checkboxClass}>
                                            <lightning-input data-target-id={material.ProductId} type="checkbox"
                                                label={labels.compareLabel} name="compareInput" onchange={inputChange}
                                                checked={material.checked} data-element="compareInput">
                                            </lightning-input>
                                        </div>
                                    </li>
                                </template>
                            </ul>
                        </template>
                    </div>
                </div>
            </section>
            <!--FIN-PRODUCT-LIST-PAGE-->
            <!--INICIO-TABLA-COMPARACION-->
            <c-g-l_popup-compare
                if:true={showpopup}
                matlist={materialsToCompare}
                onpopup={handlePopUp}
                onremovecompare={handleRemoveCompare}
                onremoveall={handleRemoveAll}
                showpopup={showpopup}
                reallstsize={toCompareListSize}>
            </c-g-l_popup-compare>
            <!--FIN-TABLA-COMPARACION-->
        </template>
        <template if:true={callchild}>
			<div>
			    <c-g-l_filter-categories
					active-section-list={activeSectionsList}
					filter-names-selected={filterNamesSelected}
					oneventfiltersel={callFromChild}	
					oneventfilterdesel={callFromChildDesel}
					oneventfilterreset={callFromChildReset}
					oneventapplyfilter={callFromChildApply}
					oneventcancelfilter={callFromChildCancel}
					oneventbuttonclearf={callFromChildClearButton}
					show-use-material-filter={showUseMaterialFilter}
					show-covering-filter={showCoveringFilter}
					show-homologated-filter={showHomologatedFilter}
					show-imprint-filter={showImprintFilter}
					use-material-filter-set={useMaterialFilterSet}
					covering-filter-set={coveringFilterSet}
					homologated-filter-set={homologatedFilterSet}
					imprint-filter-set={imprintFilterSet}
					>
				</c-g-l_filter-categories>
			</div>
		</template>
    </template>
</template>