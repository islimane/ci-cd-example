<!-- sldsValidatorIgnore -->
<template>
    <lightning-spinner
        if:false={isLoaded}
        class="slds-is-relative slds-align_absolute-center slds-var-m-around_large"
        alternative-text="Loading"
        size="medium"
        variant="brand">
    </lightning-spinner>
    <template if:true={isLoaded}>
        <div class="slds-col slds-size--1-of-1 slds-var-p-bottom_large headerlass">
            <h2 class="slds-text-heading_large slds-center">{labels.myLists}</h2>
            <lightning-button variant="base" label={labels.createList} onclick={requestCreateWishlist} class="slds-var-m-left_x-small" style="font-size: 16px;"></lightning-button>
        </div>       
        <div>
            <template if:false={wishListIsEmpty}>
            <lightning-tabset class="slds-tabs_large">
                <template for:each={initialwishlistMap} for:item="tab">
                    <lightning-tab label={tab.name} key={tab.key}>
												<template if:true={openRenameModal}>
														<section role="dialog" tabindex="-1" aria-modal="true" aria-labelledby="modal-heading-01" class="slds-modal slds-fade-in-open">
																<div class="slds-modal__container" >
																		<lightning-button-icon icon-name="utility:close" onclick={hideModal} alternative-text="Close" size="medium" class="lightningDelete"></lightning-button-icon>
																		<div class="slds-modal__header">
																				<h1 class="slds-modal__title slds-hyphenate">{labels.createName}</h1>
																		</div>
																		<div style="background: white; padding: 1rem;">
																				{labels.assignName}
																				<div class="slds-var-p-around_medium">
																						<lightning-input type="text" label={labels.enterText} placeholder={labels.typeHere} onchange={handleInputChange} required></lightning-input>
																				</div>
																		</div>
																		<div class="slds-modal__footer">
																				<button class="slds-button slds-button_neutral" onclick={hideModal}>{labels.cancel}</button>
																				<button class="slds-button slds-button_brand" data-target-id={tab.key} onclick={renameWishlist}>{labels.save}</button>
																		</div>
																</div>
														</section>
														<div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
												</template>
                        <template if:true={tab.value}>
                            <div class="tabclass">
                                <lightning-button-group class="buttonGroupStyle">
                                    <lightning-button label={labels.rename} data-target-id={tab.key} onclick={renameWishlistRequest}></lightning-button>
                                    <lightning-button label={labels.delete} data-target-id={tab.key} onclick={handleDelete}></lightning-button>
                                </lightning-button-group>
                                <lightning-button label={labels.addToCart} variant="brand" data-target-id={tab.key} onclick={addWishListToCart} class="buttonAddToCart"></lightning-button>
                            </div>
                            <template for:each={tab.value} for:item="item">
                                <li key={item} class="lirecordsclass">
                                    <figure class="lirecords_figureclass">
                                        <a tabindex="-1" href="" class="lirecords_aclass">
                                            <img class="lirecords_imgclass" src={item.Product2.Parent_Product_Id__r.Product_Image__c}>
                                        </a>
                                    </figure>
                                    <div class="product-details slds-has-flexi-truncate slds-var-m-left_small">
                                        <h3 class="product-name slds-text-heading_medium slds-truncate" title={item.Product2.Name}>
                                            {item.Product2.Name}
                                        </h3> 
                                        <div class="product-variant-attributes slds-var-p-bottom_xx-small">
                                        </div>
                                        <div class="line-item-properties slds-var-m-top_small">
                                            <div class="product-fields">
                                                <div class="slds-var-m-right_small">
                                                    <ul>
                                                        <li>
                                                          <span class="product-fields-label">{labels.family}</span>
                                                          <span class="product-fields-icon"><lightning-icon style=" --slds-c-icon-color-foreground-default: rgb(179 179 179);" size="xx-small" icon-name="utility:dash"></lightning-icon></span>
                                                          <span class="product-fields-value"><lightning-formatted-rich-text value={item.Product2.Parent_Product_Family__c}></lightning-formatted-rich-text></span>
                                                        </li>
                                                        <li>
                                                          <span class="product-fields-label">{labels.measure}</span>
                                                          <span class="product-fields-icon"><lightning-icon style=" --slds-c-icon-color-foreground-default: rgb(179 179 179);" size="xx-small" icon-name="utility:dash"></lightning-icon></span>
                                                          <span class="product-fields-value"><lightning-formatted-rich-text value={item.Product2.Measure__c}></lightning-formatted-rich-text></span>
                                                        </li>
                                                        <li>
                                                          <span class="product-fields-label">{labels.description}</span>
                                                          <span class="product-fields-icon"><lightning-icon style=" --slds-c-icon-color-foreground-default: rgb(179 179 179);" size="xx-small" icon-name="utility:dash"></lightning-icon></span>
                                                          <span class="product-fields-value">
                                                            <lightning-formatted-rich-text value={item.Product2.Description}></lightning-formatted-rich-text>
                                                            <br>
                                                            <lightning-formatted-rich-text value={item.Product2.Family_Description__c}></lightning-formatted-rich-text>
                                                          </span>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                            <div class="price-buttons">
                                                <div class="product-field-price">
                                                    <dd class="slds-truncate"><!--mruiz-->
                                                        <!--<dd class="slds-truncate">{item.Product2.Tax_Price__c}</dd>-->
                                                        <lightning-formatted-number key={item.Product2.Price__c} value={item.Product2.Price__c} format-style="decimal" minimum-fraction-digits="3"></lightning-formatted-number>
                                                        <span key={item.Product2.Tax_Price__c}> {item.Product2.Tax_Price__c}</span>
                                                    </dd>
                                                </div>
                                                <div class="quantity-price-remove">
                                                    <div class="slds-var-p-horizontal_large slds-has-flexi-truncate"></div>
                                                    <lightning-button-icon
                                                        class="slds-var-m-right_small buttonicondel"
                                                        data-target-id={item.Id}
                                                        icon-name="utility:delete"
                                                        alternative-text="delete"
                                                        onclick={handleDelete}>
                                                    </lightning-button-icon>
                                                    <lightning-button-icon
                                                        class="slds-var-m-right_small buttoniconcart"
                                                        data-target-id={item.Id}
                                                        data-target-prodid={item.Product2Id}
                                                        data-target-qty={item.Product2.Case_Units__c}
                                                        icon-name="utility:cart"
                                                        alternative-text="addtocart"
                                                        variant="brand"
                                                        onclick={addWishListToCart}>
                                                    </lightning-button-icon>
                                                    <!--lightning-button disabled={disableButton} data-target-id={item.Id} data-target-prodid={item.Product2Id} data-target-qty={item.Product2.Case_Units__c} variant="brand" label="Add To Cart" title="Add To Cart" onclick={addWishListToCart} class="slds-align_absolute-center"></lightning-button-->
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                            </template>
                            <template if:false={tab.showMore}>
                                <lightning-button disabled={disableButton} data-target-id={tab.key} variant="base" label={labels.viewMore} title="View More" onclick={loadMoreData} class="slds-align_absolute-center slds-p-bottom_small"></lightning-button>
                            </template>
                            <div class="alltocart-buttons">
                                <lightning-button label={labels.addToCart} variant="brand" data-target-id={tab.key} onclick={addWishListToCart}></lightning-button>
                            </div>
                        </template>
                        <template if:false={tab.value}>
                            <div style="display: flex; justify-content: space-between;">
                                <lightning-button-group>
                                    <lightning-button label={labels.rename} data-target-id={tab.key} onclick={renameWishlistRequest}></lightning-button>
                                    <lightning-button label={labels.delete} data-target-id={tab.key}  onclick={handleDelete}></lightning-button>
                                </lightning-button-group>
                            </div>
                            <div class="slds-text-align_center slds-text-color_weak slds-p-top_xx-large">
                                <h3 class="slds-text-heading_medium">{labels.noItems}</h3>
                                <p class="slds-text-body_regular slds-p-top_small">{labels.addProducts}</p>
                            </div>
                        </template> 
                    </lightning-tab>
                </template>   
            </lightning-tabset>
        </template>
        <template if:true={wishListIsEmpty}>
            <div class="slds-text-align_center slds-text-color_weak slds-var-m-vertical_xx-large">
                <h3 class="slds-text-heading_medium">{labels.emptyFilterList0}</h3>
                <p class="slds-text-body_regular slds-var-p-top_small">{labels.emptyFilterList1}</p>
            </div>   
        </template>  
        </div>
        <template if:true={openModal}>
            <section role="dialog" tabindex="-1" aria-modal="true" aria-labelledby="modal-heading-01" class="slds-modal slds-fade-in-open">
                <div class="slds-modal__container" >
                    <lightning-button-icon icon-name="utility:close" onclick={hideModal} alternative-text="Close" size="medium" class="lightningDelete"></lightning-button-icon>
                    <div class="slds-modal__header">
                        <h1 id="modal-heading-01" class="slds-modal__title slds-hyphenate">{labels.createList}</h1>
                    </div>
                    <div style="background: white; padding: 1rem;">
                        {labels.assignName}
                        <div class="slds-var-p-around_medium">
                            <lightning-input type="text" label={labels.enterText} placeholder={labels.typeHere} onchange={handleInputChange} required></lightning-input>
                        </div>
                    </div>
                    <div class="slds-modal__footer">
                        <button class="slds-button slds-button_neutral" onclick={hideModal}>{labels.cancel}</button>
                        <button class="slds-button slds-button_brand" onclick={createWishlist}>{labels.create}</button>
                    </div>
                </div>
            </section>
            <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
        </template>
    </template>
</template>